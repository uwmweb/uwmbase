@import 'init';
@import 'base';

body.is-path-search {

  section.content-topper {

    @extend %uwmed-gradient-angled-dark-background;
    padding-bottom: 30px;

    .filters-wrap {
      @include make-row();

      // Standard widths:
      .views-exposed-form, .dm-facets-selector {

        margin-bottom: 10px;

        @include make-col-ready();
        @include make-col(12);

        @include media-breakpoint-up('md') {
          @include make-col(4);
        }
        @include media-breakpoint-up('lg') {
          @include make-col(3);
        }

        @extend %invisible;

      }

      .submit-wrapper {
        @extend %invisible;
      }

      .dm-facets-widget-links, .btn-cta.reset {
        @extend %hidden;
      }

      // On the main search page:
      .views-exposed-form {
        @include media-breakpoint-up('lg') {
          @include make-col(6);
        }
      }
      .dm-facets-selector {
        @include media-breakpoint-up('lg') {
          @include make-col(3);
        }
      }

      .dm-facets-selector button.btn, .views-exposed-form input.form-text {
        @extend %input-border-style;

      }
      @extend %button-width-fixes;

    }

    .other-search-pages {
      .caps {
        text-transform: uppercase;
      }
      div {
        float: left;
        margin-right: 25px;
      }
      a {
        color: theme-color('link-blue');
        text-decoration: none;
      }
    }

  }

  section.content-columns {

    padding-top: 20px;

    .views-element-container {

      //@include make-row();

      article {
        @include make-col(12);
        @include media-breakpoint-up('lg') {
          @include make-col(7);
        }
        padding-bottom: 15px;
        border-bottom: 1px solid #dcdcdc;

        h2 {
          color: theme-color('primary');
          text-decoration: none;
          padding-bottom: 0;
          a {
            &, &:link, &:visited, &:active, &:focus {
              color: theme-color('primary');
              text-decoration: none;
            }
            &:hover {
              //color: $uwmed-pop-blue;
              text-decoration: none;
            }
          }
        }

        a.view-more {
          display: block;
          margin: 14px 0;
        }

        em.match {
          font-weight: bold;
        }

      }

      nav.pager {
        margin: 20px 0;
        text-align: left;
        ul.pager__items {
          padding: 0;
          a {
            text-decoration: none;
          }
        }
      }

    }

    .view-total-rows-0 .hidden.search-no-results {
      display: block !important;
    }
  }

  // Fixes:
  .form--inline .form-item {
    margin: 0;
    padding: 0;
    width: 100%;
  }
  .js input.form-autocomplete {
    background-image: none !important;
  }
  .form-actions, .form-item-s span.btn, .results-count-summary,
  #block-hidden-show-region-item, .views-exposed-form span.js-form-item.form-item.js-form-type-textfield.form-type-textfield.js-form-item-s.form-item-s.btn.btn-outline-teal,
  .dm-facet-id-general_search_facet_uwmsearchwithin small {
    display: none;
  }
  .bootstrap-select, .bootstrap-select:not([class*=col-]):not([class*=form-control]):not(.input-group-btn) {
    width: 100% !important;
  }
  .dropdown-menu.show {
    min-width: auto !important;
  }

  // No-results behavior:
  .views-element-container.contextual-region {
    min-height: 400px;
    .contextual-region.view.view-id-uwm_general_search.view-display-id-page_1.view-without-query {
      display: none;
    }
  }

}

%invisible {
  visibility: hidden;
  &.on {
    visibility: visible;
  }
}

%hidden {
  display: none;
  &.on {
    display: block;
  }
}

%input-border-style {
  background: white;
  border: 1px solid #dcdcdc;
  box-shadow: 0 0 3px 0 #dcdcdc;
}

%button-width-fixes {
  .btn-cta, .dm-facets-selector button, .views-exposed-form input.form-text {
    width: 100%;
    margin: 0;
    padding: 6px 10px 6px 10px;
    font-size: 14px;
    display: inline-block;
  }
  .btn-cta {
    width: auto;
    padding: 6px 20px;
    margin-right: 15px;
    height: unset;
    line-height: unset;
    float: left;

  }
}

body.is-logged-in-user.path-search-providers-dx {
  .hidden.facets-widget {
    display: block !important;
    max-height: 100px;
    overflow: scroll;
    border: 1px solid #dcdcdc;
    float: left;
  }
}

// For administrators, show default filters:
body.is-path-search.is-logged-in-user {

  .results-count-summary {
    display: block !important;
  }
  &.path-search-dx, &.path-search-providers-dx, &.path-search-locations-dx {
    .filters-wrap .hidden.facets-widget {
      display: block !important;
    }
  }
}
