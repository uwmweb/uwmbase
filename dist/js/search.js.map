{"version":3,"sources":["search.js"],"names":["$","Drupal","behaviors","uwHeaderSearchClick","attach","context","settings","typeAhead","window","undefined","$container","$list","$listItems","find","$title","$typeahead","clearSelectedListItem","removeClass","closeMenu","el","closest","toggleClass","css","filterList","filterString","val","RegExp","i","length","$item","name","data","match","addClass","selectFirstListItem","hideListItem","openMenu","parent","height","focus","not","eq","selectListItem","html","filter","selectListItemAtIndex","index","updateListPosition","selectNextListItem","hasClass","selectPreviousListItem","showListItem","rel","outerHeight","position","top","registerEvents","self","click","on","e","keyCode","target","value","jQuery"],"mappings":"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","file":"search.js","sourcesContent":["/**\n * @file\n * Custom JavaScript for UW Medicine.\n */\n\n(function ($, Drupal) {\n  Drupal.behaviors.uwHeaderSearchClick = {\n    attach(context, settings) {\n\n\n      var typeAhead = (function ($, window, undefined) {\n        var $container = $('.dropdown-menu'),\n          $list = $('.dropdown-menu ul'),\n          $listItems = $list.find('li'),\n          $title = $('.title'),\n          $typeahead = $('#js-typeAhead');\n\n        return {\n          clearSelectedListItem: function () {\n            $('.is-selected').removeClass('is-selected');\n          },\n          closeMenu: function (el) {\n            $(el).closest('.dropdown').toggleClass('closed');\n            $container.css('height', 0);\n            $list.css('top', 30);\n          },\n          filterList: function (filterString) {\n            var val = new RegExp(filterString, 'gi');\n\n            for (var i = 0; i < $listItems.length; i++) {\n              var $item = $($listItems[i]);\n\n              if (filterString.length > 0) {\n                var name = $item.data('name');\n\n                if (name && !name.match(val)) {\n                  $item.addClass('is-hidden');\n                } else {\n                  $item.removeClass('is-hidden');\n                }\n                this.selectFirstListItem();\n              } else {\n                $item.removeClass('is-hidden');\n                this.clearSelectedListItem();\n              }\n            }\n          },\n          hideListItem: function ($item) {\n            $item.addClass('is-hidden');\n          },\n          openMenu: function (el) {\n            $(el).parent().toggleClass('closed');\n            $container.css({\n              height: 200\n            });\n            $('#js-typeAhead').focus();\n          },\n          selectFirstListItem: function () {\n            this.clearSelectedListItem();\n            $listItems.not('.is-hidden').eq(0).addClass('is-selected');\n          },\n          selectListItem: function () {\n            $title.html($listItems.filter('.is-selected').html());\n            this.closeMenu($list);\n          },\n          selectListItemAtIndex: function (index) {\n            this.clearSelectedListItem();\n            $listItems.eq(index).addClass('is-selected');\n            this.updateListPosition(index);\n          },\n          selectNextListItem: function () {\n            var index = $listItems.hasClass('is-selected') &&\n              $listItems.filter('.is-selected').index() + 1 ||\n              0;\n            this.selectListItemAtIndex(index);\n          },\n          selectPreviousListItem: function () {\n            var index = $listItems.hasClass('is-selected') &&\n              $listItems.filter('.is-selected').index() - 1 ||\n              0;\n            this.selectListItemAtIndex(index);\n          },\n          showListItem: function ($item) {\n            $item.removeClass('is-hidden');\n          },\n          updateListPosition: function (index) {\n            var rel = $container.outerHeight() - $listItems.eq(index).position().top - 50;\n\n            if (rel < 30) {\n              $list.css('top', rel);\n            } else if ($list.position().top - $listItems.eq(index).position().top < 30) {\n              $list.css('top', 30)\n            }\n          },\n          registerEvents: function () {\n            var self = this;\n            $('.dropdown .title').click(function () {\n              if ($container.height() > 0) {\n                self.closeMenu(this);\n              } else {\n                self.openMenu(this);\n              }\n            });\n\n            $('.dropdown-menu li').click(function () {\n              if ($(this).index() > 0) {\n                $title.html($(this).html());\n                self.closeMenu(this);\n              }\n            });\n\n\n            $typeahead.on('keyup', function (e) {\n              // 40 = down arrow\n              // 38 = up arrow\n              // 8 = backspace\n              if (e.keyCode === 40) {\n                self.selectNextListItem();\n              } else if (e.keyCode === 38) {\n                self.selectPreviousListItem();\n              } else if (e.keyCode === 13) {\n                self.selectListItem();\n              } else if (e.keyCode >= 65 || e.keyCode === 8) {\n                self.filterList(e.target.value);\n              }\n            });\n          }\n        }\n      }(jQuery, window, undefined));\n\n      typeAhead.registerEvents();\n\n    }\n  };\n})(jQuery, Drupal);\n"]}