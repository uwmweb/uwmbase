{"version":3,"sources":["search-locations.js"],"names":["$","Drupal","behaviors","uwmSearchLayout","attach","context","settings","searchResults","uwm_locations_search_api_index","markers","locationsMap","gmap3","center","zoom","mapTypeId","google","maps","MapTypeId","ROADMAP","key","each","b","obj","position","label","icon","content","marker","on","event","setIcon","setTimeout","console","log","push","cluster","size","cb","length","x","y","jQuery"],"mappings":";;AAAA;;;;;AAKA,CAAC,UAAUA,CAAV,EAAaC,MAAb,EAAqB;;AAElBA,WAAOC,SAAP,CAAiBC,eAAjB,GAAmC;;AAE/BC,gBAAQ,gBAAUC,OAAV,EAAmBC,QAAnB,EAA6B;;AAEjC,gBAAIC,gBAAgBD,SAASE,8BAAT,IAA2C,EAA/D;AACA,gBAAIC,UAAU,EAAd;;AAEA,gBAAIC,eAAeV,EAAE,0BAAF,EAA8BK,OAA9B,EAAuCM,KAAvC,CAA6C;AAC5DC,wBAAQ,CAAC,SAAD,EAAY,CAAC,UAAb,CADoD;AAE5DC,sBAAM,EAFsD;AAG5DC,2BAAWC,OAAOC,IAAP,CAAYC,SAAZ,CAAsBC,OAH2B;AAI5DC,qBAAK;AAJuD,aAA7C,CAAnB;;AAOAnB,cAAEoB,IAAF,CAAOb,aAAP,EAAsB,UAAUc,CAAV,EAAa;;AAE/B,oBAAIC,MAAM;AACNC,8BAAU,CAACF,EAAE,KAAF,CAAD,EAAWA,EAAE,KAAF,CAAX,CADJ;AAENG,2BAAOH,EAAE,OAAF,CAFD;AAGNI,0BAAM,kDAHA;AAINC,6BAAS,SAASL,EAAE,OAAF,CAAT,GAAsB;AAJzB,iBAAV;;AAOA,oBAAIM,SAASjB,aAAaiB,MAAb,CAAoBL,GAApB,CAAb;;AAEAK,uBAAOC,EAAP,CAAU,OAAV,EAAmB,UAAUD,MAAV,EAAkBE,KAAlB,EAAyB;AACxCF,2BAAOG,OAAP,CAAe,mDAAf;AACAC,+BAAW,YAAY;AACnBJ,+BAAOG,OAAP,CAAe,kDAAf;AACAE,gCAAQC,GAAR,CAAYN,MAAZ;AACH,qBAHD,EAGG,GAHH;AAIH,iBAND;;AAQAlB,wBAAQyB,IAAR,CAAaP,MAAb;AAEH,aArBD;;AAuBAjB,yBAAaiB,MAAb,CAAoBlB,OAApB;;AAEAC,yBAAayB,OAAb,CAAqB;AACjBC,sBAAM,GADW;AAEjB3B,gCAFiB;AAGjB4B,oBAAI,YAAU5B,OAAV,EAAmB;AACnB,wBAAIA,QAAQ6B,MAAR,GAAiB,CAArB,EAAwB;AACpB;AACA,4BAAI7B,QAAQ6B,MAAR,GAAiB,EAArB,EAAyB;AACrB,mCAAO;AACHZ,yCAAS,oCAAoCjB,QAAQ6B,MAA5C,GAAqD,QAD3D;AAEHC,mCAAG,CAAC,EAFD;AAGHC,mCAAG,CAAC;AAHD,6BAAP;AAKH;AACJ;AACJ;AAdgB,aAArB;AAgBH;AAvD8B,KAAnC;AA0DH,CA5DD,EA4DGC,MA5DH,EA4DWxC,MA5DX","file":"search-locations.js","sourcesContent":["/**\n * @file\n * Custom JavaScript for UW Medicine.\n */\n\n(function ($, Drupal) {\n\n    Drupal.behaviors.uwmSearchLayout = {\n\n        attach: function (context, settings) {\n\n            var searchResults = settings.uwm_locations_search_api_index || {};\n            var markers = [];\n\n            var locationsMap = $(\".search-results-map #map\", context).gmap3({\n                center: [47.609722, -122.333056],\n                zoom: 12,\n                mapTypeId: google.maps.MapTypeId.ROADMAP,\n                key: \"AIzaSyAdY8R5lQPdDO_ffF9WADgbYVsYmpfv3Vw\"\n            });\n\n            $.each(searchResults, function (b) {\n\n                var obj = {\n                    position: [b[\"lat\"], b[\"lon\"]],\n                    label: b[\"title\"],\n                    icon: \"https//maps.google.com/mapfiles/marker_green.png\",\n                    content: \"<em>\" + b[\"title\"] + \"</em>\"\n                };\n\n                let marker = locationsMap.marker(obj);\n\n                marker.on(\"click\", function (marker, event) {\n                    marker.setIcon(\"http://maps.google.com/mapfiles/marker_orange.png\");\n                    setTimeout(function () {\n                        marker.setIcon(\"http://maps.google.com/mapfiles/marker_green.png\");\n                        console.log(marker);\n                    }, 200);\n                });\n\n                markers.push(marker);\n\n            });\n\n            locationsMap.marker(markers);\n\n            locationsMap.cluster({\n                size: 200,\n                markers,\n                cb: function (markers) {\n                    if (markers.length > 1) {\n                        // 1 marker stay unchanged (because cb returns nothing)\n                        if (markers.length < 20) {\n                            return {\n                                content: '<div class=\"cluster cluster-1\">' + markers.length + '</div>',\n                                x: -26,\n                                y: -26\n                            };\n                        }\n                    }\n                }\n            });\n        }\n    };\n\n})(jQuery, Drupal);\n"]}